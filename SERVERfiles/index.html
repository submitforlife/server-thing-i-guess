<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Server Thing I Guess</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    margin: 0; padding: 0;
    background-image: url('background.jpg');
    background-size: cover;
    background-position: center top;
    background-repeat: no-repeat;
    background-attachment: fixed;
    color: white;
    min-height: 100vh;
    transition: background 0.4s, color 0.4s;
  }

  header {
    background-color: #6B7280;
    padding: 20px;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    transition: background 0.4s, color 0.4s;
  }

  main {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
    transition: transform 0.4s;
  }

  .info-box { 
    display: none; 
    background-color: rgba(0,0,0,0.5); 
    padding: 20px; border-radius:12px; 
    max-width:600px; text-align:center; font-size:1.2em; color:white;
    opacity:0; transform:translateY(-20px); transition: opacity 0.4s, transform 0.4s;
  }
  .info-box.show { display:block; opacity:1; transform:translateY(0); }

  .buttons { display:flex; gap:20px; transition: transform 0.4s ease; }
  .buttons button { 
    background-color:#2563EB; color:white; font-weight:bold; padding:10px 20px;
    border:none; border-radius:8px; cursor:pointer; transition:0.2s; 
  }
  .buttons button:hover { background-color:#1D4ED8; transform:scale(1.1); }

  /* Settings button */
  #settingsBtn {
    position: fixed; top: 20px; left: 20px;
    background: transparent;
    color: white;
    font-weight: bold;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
    z-index: 1000;
  }
  #settingsBtn:hover { transform: scale(1.05); }

  #settingsBox {
    position: fixed; top: 60px; left: 20px;
    background-color: rgba(0,0,0,0.5);
    padding: 10px;
    border-radius: 12px;
    display: none;
    z-index: 999;
    color: white;
  }

  /* File list */
  #fileBox { display:none; background-color: rgba(0,0,0,0.5); padding:20px; border-radius:12px; max-width:800px; width:100%; color:white; text-align:left; }
  #fileBox table { width:100%; border-collapse:collapse; }
  #fileBox th, #fileBox td { padding:8px; border-bottom:1px solid rgba(255,255,255,0.3); text-align:left; }
  #fileBox a { color:#2563EB; text-decoration:none; }
  #fileBox a:hover { text-decoration:underline; }

  /* Preview modal */
  #previewModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; flex-direction:column; z-index:200; }
  #previewModal img, #previewModal pre { max-width:80%; max-height:80%; color:white; margin-bottom:10px; }
  #downloadBtn { margin-bottom:10px; padding:8px 16px; border:none; border-radius:8px; cursor:pointer; background:#2563EB; color:white; font-weight:bold; }

  /* Social icons */
  .socials { position:fixed; bottom:20px; right:20px; display:flex; gap:10px; }
  .socials img { width:32px; height:32px; filter:invert(1); cursor:pointer; }

  /* Dark mode */
  body.dark-mode { background-image:url('background-dark.jpg'); color:black; }
  body.dark-mode header { background-color:white; color:black; }
  body.dark-mode .buttons button { background-color:white; color:black; }
  body.dark-mode #settingsBtn { color:black; }
</style>
</head>
<body>
<header>Server Thing I Guess</header>

<!-- Settings button and menu -->
<button id="settingsBtn">Settings</button>
<div id="settingsBox">
  <label><input type="checkbox" id="darkModeToggle"> Enable Dark Mode</label>
</div>

<main>
  <div class="buttons">
    <button>Home</button>
    <button id="infoBtn">Info</button>
    <button id="fileBtn">Files</button>
  </div>

  <!-- Info box under buttons -->
  <div class="info-box" id="infoBox">
    <p>hey uh. im the creator of this server thing. uh. hi guys im submitforlife6390. i do stuff. stupid stuff on stuff. also. you can uh. idk just do whatever idc what u do lol</p>
  </div>

  <div id="fileBox">
    <h2>Files</h2>
    <table>
      <thead>
        <tr><th>Name</th><th>Size (bytes)</th><th>Modified</th><th>Type</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</main>

<div id="previewModal" onclick="this.style.display='none'">
  <img id="modalImg" src="" />
  <pre id="modalText"></pre>
  <a id="downloadBtn" href="#" download>Download</a>
</div>

<!-- Socials -->
<div class="socials">
  <a href="https://www.youtube.com/@submitforlife6390" target="_blank"><img src="yt.png"></a>
  <a href="https://github.com/submitforlife" target="_blank"><img src="github.png"></a>
  <a href="https://www.reddit.com/user/borbunurobloxx/" target="_blank"><img src="reddit.png"></a>
</div>

<script>
// Info box toggle
const infoBtn = document.getElementById('infoBtn');
const infoBox = document.getElementById('infoBox');
infoBtn.addEventListener('click', ()=>{
  if(!infoBox.classList.contains('show')){
    infoBox.style.display='block';
    setTimeout(()=>infoBox.classList.add('show'),10);
  } else {
    infoBox.classList.remove('show');
    setTimeout(()=>infoBox.style.display='none',400);
  }
});

// Settings button toggle
const settingsBtn = document.getElementById('settingsBtn');
const settingsBox = document.getElementById('settingsBox');
settingsBtn.addEventListener('click', ()=>{
  settingsBox.style.display = (settingsBox.style.display==='block')?'none':'block';
});

// Dark mode toggle
const darkModeToggle = document.getElementById('darkModeToggle');
darkModeToggle.addEventListener('change', ()=>{
  document.body.classList.toggle('dark-mode', darkModeToggle.checked);
});

// File box toggle
const fileBtn = document.getElementById('fileBtn');
const fileBox = document.getElementById('fileBox');
fileBtn.addEventListener('click', ()=>{
  if(fileBox.style.display==='block'){
    fileBox.style.display='none';
    document.querySelector('.buttons').style.transform='translateY(0)';
  } else {
    fileBox.style.display='block';
    loadFiles();
  }
});

// Load files dynamically from server
function loadFiles(){
  fetch("/files.json")
    .then(r=>r.json())
    .then(files=>{
      const tbody = document.querySelector("#fileBox tbody");
      tbody.innerHTML="";
      files.forEach(f=>{
        const row = document.createElement("tr");
        row.innerHTML = `
          <td><a href="#" onclick="previewFile('${f.name}')">${f.name}</a></td>
          <td>${f.size}</td>
          <td>${f.mtime}</td>
          <td>${f.ext}</td>
        `;
        tbody.appendChild(row);
      });
    });
}

// File preview
function previewFile(file){
  const ext = file.split('.').pop().toLowerCase();
  const modal = document.getElementById('previewModal');
  const modalImg = document.getElementById('modalImg');
  const modalText = document.getElementById('modalText');
  const downloadBtn = document.getElementById('downloadBtn');

  modal.style.display='flex';
  modalImg.style.display='none';
  modalText.style.display='none';
  downloadBtn.href='/files/'+file;

  if(['jpg','jpeg','png','gif'].includes(ext)){
    modalImg.src='/files/'+file;
    modalImg.style.display='block';
  } else if(['txt','py','html','js','css'].includes(ext)){
    fetch('/files/'+file).then(r=>r.text()).then(t=>{
      modalText.textContent=t;
      modalText.style.display='block';
    });
  } else {
    window.open('/files/'+file,'_blank');
    modal.style.display='none';
  }

  // Move buttons up smoothly
  document.querySelector('.buttons').style.transform='translateY(-100px)';
}

// Reset buttons when modal is closed
const previewModal = document.getElementById('previewModal');
previewModal.addEventListener('click', ()=>{
  document.querySelector('.buttons').style.transform='translateY(0)';
});
</script>
</body>
</html>
